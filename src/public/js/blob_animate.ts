$(function () {
    setupBlob()
})

async function setupBlob(): Promise<void> {
    var paper = Snap('#blob-thing')
    var h = 500
    var w = 960
    paper.attr({
        viewbox: `0 0 ${w} ${h}`,
        width: `${w}`,
        height: `${h}`,
        preserveAspectRatio: 'none'
    })

    var path = 'M149 -149.7C180.2 -117.9 183.6 -58.9 179.8 -3.8C176 51.4 165.1 102.8 133.9 140.3C102.8 177.8 51.4 201.4 3.4 198C-44.5 194.5 -89.1 164.1 -124.8 126.6C-160.4 89.1 -187.2 44.5 -187 0.2C-186.9 -44.2 -159.7 -88.4 -124.1 -120.2C-88.4 -152.1 -44.2 -171.5 7.4 -178.9C58.9 -186.3 117.9 -181.5 149 -149.7'
    var firstBlob = paper.path(path).attr({
        fill: '#5a189a'
    })
    paper.group(firstBlob).attr({
        transform: 'translate(494.1265908851177 246.85717859365212)'
    })

    var paths: string[] = [
        "M139.5 -131.2C180 -99 211.5 -49.5 213.9 2.4C216.2 54.2 189.4 108.4 148.9 148.6C108.4 188.8 54.2 214.9 3.2 211.7C-47.8 208.5 -95.7 176 -126.9 135.9C-158.2 95.7 -172.9 47.8 -178.4 -5.5C-183.9 -58.9 -180.4 -117.9 -149.1 -150C-117.9 -182.2 -58.9 -187.6 -4.7 -182.9C49.5 -178.2 99 -163.3 139.5 -131.2",
        "M148.3 -142.8C186.8 -109.8 208.9 -54.9 203.6 -5.4C198.2 44.2 165.4 88.4 126.9 127.6C88.4 166.7 44.2 200.9 -2.3 203.2C-48.8 205.5 -97.6 175.9 -139.2 136.7C-180.9 97.6 -215.5 48.8 -214.4 1.1C-213.3 -46.7 -176.7 -93.3 -135 -126.3C-93.3 -159.3 -46.7 -178.7 4.1 -182.8C54.9 -186.9 109.8 -175.8 148.3 -142.8",
        "M157.8 -151.6C199.1 -116.4 223.6 -58.2 217.1 -6.5C210.6 45.3 173.2 90.5 131.8 132.2C90.5 173.8 45.3 211.9 -2 213.9C-49.3 215.9 -98.5 181.9 -138.4 140.2C-178.2 98.5 -208.6 49.3 -206.1 2.5C-203.5 -44.2 -168.1 -88.4 -128.2 -123.6C-88.4 -158.7 -44.2 -184.9 7 -191.9C58.2 -198.9 116.4 -186.8 157.8 -151.6",
        "M145 -141C180.7 -109.4 197.3 -54.7 192.1 -5.2C186.9 44.2 159.7 88.4 124.1 121.1C88.4 153.7 44.2 174.9 -0.6 175.5C-45.5 176.2 -91 156.3 -124.3 123.6C-157.6 91 -178.8 45.5 -185.5 -6.7C-192.3 -58.9 -184.5 -117.9 -151.2 -149.5C-117.9 -181.2 -58.9 -185.6 -2.1 -183.5C54.7 -181.3 109.4 -172.7 145 -141",
        "M126.9 -126.5C158.6 -95.2 174.3 -47.6 179.9 5.7C185.6 58.9 181.2 117.9 149.5 156.9C117.9 195.9 58.9 214.9 5.9 209C-47.1 203.1 -94.3 172.3 -135.1 133.3C-175.9 94.3 -210.5 47.1 -210.4 0.1C-210.2 -46.9 -175.5 -93.8 -134.6 -125.1C-93.8 -156.3 -46.9 -171.9 0.4 -172.3C47.6 -172.6 95.2 -157.7 126.9 -126.5",
        "M141.6 -131.2C183.3 -99.9 216.6 -50 217.7 1.1C218.8 52.1 187.5 104.2 145.8 142C104.2 179.8 52.1 203.4 0.5 203C-51.1 202.5 -102.3 178 -140.5 140.1C-178.6 102.3 -203.8 51.1 -201.9 1.9C-200 -47.4 -171.1 -94.8 -132.9 -126C-94.8 -157.3 -47.4 -172.4 1.3 -173.7C50 -175 99.9 -162.4 141.6 -131.2",
        "M134.1 -129.6C174.5 -93.8 208.2 -46.9 213.8 5.5C219.3 58 196.6 116 156.3 157.6C116 199.3 58 224.6 2.2 222.4C-53.5 220.2 -107 190.3 -138.3 148.7C-169.5 107 -178.5 53.5 -174.6 3.9C-170.7 -45.7 -154 -91.5 -122.7 -127.3C-91.5 -163.1 -45.7 -189.1 0.6 -189.6C46.9 -190.2 93.8 -165.5 134.1 -129.6",
        "M130.9 -133.7C168.9 -92.9 198.4 -46.4 202.6 4.1C206.7 54.7 185.4 109.4 147.4 151C109.4 192.7 54.7 221.3 5.2 216.1C-44.2 210.9 -88.4 171.7 -121.6 130.1C-154.7 88.4 -176.9 44.2 -179.6 -2.8C-182.4 -49.7 -165.8 -99.5 -132.6 -140.3C-99.5 -181.1 -49.7 -213.1 -1.6 -211.4C46.4 -209.8 92.9 -174.5 130.9 -133.7",
        "M132.7 -139.7C166.9 -98.5 185.9 -49.3 184.2 -1.8C182.4 45.7 159.8 91.5 125.6 133.1C91.5 174.8 45.7 212.4 0.8 211.6C-44.2 210.9 -88.4 171.7 -127.4 130.1C-166.4 88.4 -200.2 44.2 -204.7 -4.5C-209.3 -53.3 -184.5 -106.5 -145.5 -147.7C-106.5 -188.9 -53.3 -217.9 -2 -215.9C49.3 -213.9 98.5 -180.9 132.7 -139.7",
        "M145 -142.6C184.8 -105.1 211.9 -52.6 214.3 2.4C216.6 57.3 194.2 114.6 154.4 152.7C114.6 190.9 57.3 209.9 4.7 205.2C-47.8 200.5 -95.7 172 -137.4 133.9C-179 95.7 -214.5 47.8 -212.7 1.8C-210.9 -44.2 -171.7 -88.4 -130.1 -125.9C-88.4 -163.4 -44.2 -194.2 4.2 -198.4C52.6 -202.6 105.1 -180.1 145 -142.6",
        "M146.6 -149.2C179.1 -114.1 187 -57 186.3 -0.7C185.6 55.6 176.3 111.3 143.8 142.5C111.3 173.8 55.6 180.6 4.6 176C-46.4 171.4 -92.9 155.4 -131.4 124.1C-169.9 92.9 -200.4 46.4 -206.7 -6.2C-212.9 -58.9 -194.9 -117.9 -156.4 -153C-117.9 -188.2 -58.9 -199.6 -0.9 -198.6C57 -197.7 114.1 -184.4 146.6 -149.2",
        "M141.1 -145.2C172.3 -109.8 179.9 -54.9 180 0.1C180.2 55.2 172.8 110.3 141.6 147.3C110.3 184.3 55.2 203.2 -0.9 204.1C-57 205 -114.1 188.1 -152.4 151.1C-190.7 114.1 -210.4 57 -211.3 -0.9C-212.3 -58.9 -194.5 -117.9 -156.2 -153.2C-117.9 -188.5 -58.9 -200.3 -2 -198.3C54.9 -196.3 109.8 -180.5 141.1 -145.2",
        "M149.1 -149C180.4 -117.9 183.9 -58.9 180.4 -3.5C176.9 51.9 166.2 103.7 135 144.4C103.7 185 51.9 214.5 -0.4 214.9C-52.6 215.2 -105.1 186.5 -141.5 145.8C-177.8 105.1 -197.9 52.6 -194.6 3.3C-191.3 -46 -164.6 -91.9 -128.3 -123.1C-91.9 -154.3 -46 -170.6 6.5 -177.1C58.9 -183.6 117.9 -180.2 149.1 -149"
    ]

    blobAnimate(firstBlob, 6000, paths)
}

function blobAnimate(blob: Snap.Element, animationSpeed: number, paths: string[]) {
    blob.animate(
        {
            path: GameUtils.rngChoice(paths)
        },
        animationSpeed,
        mina.easeinout,
        () => blobAnimate(blob, 6000, paths)
    )
}

